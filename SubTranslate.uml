<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:PapyrusJava="http://www.eclipse.org/papyrus/PapyrusJava/1" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:standard="http://www.eclipse.org/uml2/5.0.0/UML/Profile/Standard" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML">
  <uml:Model xmi:id="_egoD8BfgEeixr9hZDQbSEg" name="SubTranslate">
    <packageImport xmi:type="uml:PackageImport" xmi:id="_ekG1wBfgEeixr9hZDQbSEg">
      <importedPackage xmi:type="uml:Model" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#_0"/>
    </packageImport>
    <packagedElement xmi:type="uml:Package" xmi:id="_ib9aMBhmEeiAzanQIzaG2w" name="dao">
      <packagedElement xmi:type="uml:Class" xmi:id="_NpgYgBuTEeiM_Z9_g55MXg" name="DaoFactory" visibility="public">
        <ownedAttribute xmi:type="uml:Property" xmi:id="_Np4L8BuTEeiM_Z9_g55MXg" name="url" visibility="private" isStatic="true" type="_eTc3QBhnEeiAzanQIzaG2w" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_Np7PQBuTEeiM_Z9_g55MXg" name="defaultValue">
            <language>JAVA</language>
            <body>&quot;jdbc:mysql://localhost:3306/translator&quot;</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_NqAu0BuTEeiM_Z9_g55MXg" name="user" visibility="private" isStatic="true" type="_eTc3QBhnEeiAzanQIzaG2w" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_NqCkABuTEeiM_Z9_g55MXg" name="defaultValue">
            <language>JAVA</language>
            <body>&quot;utilisateur&quot;</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_NqDyIBuTEeiM_Z9_g55MXg" name="passwd" visibility="private" isStatic="true" type="_eTc3QBhnEeiAzanQIzaG2w" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_NqFnUBuTEeiM_Z9_g55MXg" name="defaultValue">
            <language>JAVA</language>
            <body>&quot;utilisateur&quot;</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_NqHcgBuTEeiM_Z9_g55MXg" name="conn" visibility="private" isStatic="true" type="_zX8vUBrZEeivNpsMtsMdlg" isUnique="false"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_NqJRsBuTEeiM_Z9_g55MXg" name="instance" visibility="private" isStatic="true" type="_NpgYgBuTEeiM_Z9_g55MXg" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_NqKf0BuTEeiM_Z9_g55MXg" name="defaultValue">
            <language>JAVA</language>
            <body>new DaoFactory()</body>
          </defaultValue>
        </ownedAttribute>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Nu0WUBuTEeiM_Z9_g55MXg" name="DaoFactory" specification="_NqLt8BuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    try {&#xD;
        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);&#xD;
    } catch (ClassNotFoundException e) {&#xD;
    }&#xD;
    try {&#xD;
        conn = DriverManager.getConnection(url, user, passwd);&#xD;
        conn.setAutoCommit(false);&#xD;
    } catch (SQLException e) {&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Nu8SIBuTEeiM_Z9_g55MXg" name="getInstance" specification="_Nu3ZoBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    if (conn == null)&#xD;
        instance = new DaoFactory();&#xD;
    return instance;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_NvHRQBuTEeiM_Z9_g55MXg" name="getConnection" specification="_Nu-HUBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    conn = DriverManager.getConnection(url, user, passwd);&#xD;
    conn.setAutoCommit(false);&#xD;
    return conn;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_NvQbMBuTEeiM_Z9_g55MXg" name="getDaoSubtitles" specification="_NvIfYBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    return new DaoSubtitles();&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_NvY-EBuTEeiM_Z9_g55MXg" name="getDaoLanguage" specification="_NvRpUBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    return new DaoLanguage();&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_NqLt8BuTEeiM_Z9_g55MXg" name="DaoFactory" visibility="private" method="_Nu0WUBuTEeiM_Z9_g55MXg"/>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_Nu3ZoBuTEeiM_Z9_g55MXg" name="getInstance" visibility="public" isStatic="true" method="_Nu8SIBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_Nu6c8BuTEeiM_Z9_g55MXg" type="_NpgYgBuTEeiM_Z9_g55MXg" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_Nu-HUBuTEeiM_Z9_g55MXg" name="getConnection" visibility="public" isStatic="true" method="_NvHRQBuTEeiM_Z9_g55MXg" raisedException="_NvBxsBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_NvAjkBuTEeiM_Z9_g55MXg" type="_zX8vUBrZEeivNpsMtsMdlg" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_NvIfYBuTEeiM_Z9_g55MXg" name="getDaoSubtitles" visibility="public" isStatic="true" method="_NvQbMBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_NvPNEBuTEeiM_Z9_g55MXg" type="_oexKwBuTEeiM_Z9_g55MXg" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_NvRpUBuTEeiM_Z9_g55MXg" name="getDaoLanguage" visibility="public" isStatic="true" method="_NvY-EBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_NvXv8BuTEeiM_Z9_g55MXg" type="_nyabEBuTEeiM_Z9_g55MXg" direction="return"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_d8OZEBuTEeiM_Z9_g55MXg" name="Dao&lt;T>" visibility="public" isAbstract="true">
        <ownedOperation xmi:type="uml:Operation" xmi:id="_d8PnMBuTEeiM_Z9_g55MXg" name="add" visibility="public" isAbstract="true" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_d8QOQBuTEeiM_Z9_g55MXg" name="beans" type="_zYm2oBrZEeivNpsMtsMdlg"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_d8UfsBuTEeiM_Z9_g55MXg" name="delete" visibility="public" isAbstract="true" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_d8VGwBuTEeiM_Z9_g55MXg" name="id">
            <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_d8VGwRuTEeiM_Z9_g55MXg" name="list" visibility="public" isAbstract="true" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_d8Vt0BuTEeiM_Z9_g55MXg" type="_zYm2oBrZEeivNpsMtsMdlg" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_d8WU4BuTEeiM_Z9_g55MXg"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_d8WU4RuTEeiM_Z9_g55MXg" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_d8WU4huTEeiM_Z9_g55MXg" name="update" visibility="public" isAbstract="true" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_d8W78BuTEeiM_Z9_g55MXg" name="bean" type="_zYm2oBrZEeivNpsMtsMdlg"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_nyabEBuTEeiM_Z9_g55MXg" name="DaoLanguage" visibility="public">
        <generalization xmi:type="uml:Generalization" xmi:id="_nyf6oBuTEeiM_Z9_g55MXg" general="_nybpMBuTEeiM_Z9_g55MXg"/>
        <generalization xmi:type="uml:Generalization" xmi:id="_yRN8QBuTEeiM_Z9_g55MXg" general="_d8OZEBuTEeiM_Z9_g55MXg"/>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_nykzIBuTEeiM_Z9_g55MXg" name="add" specification="_nyjlARuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
// Rien à faire : impossible d'ajouter une langue&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_nymBQRuTEeiM_Z9_g55MXg" name="delete" specification="_nylaMBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
// Rien à faire : impossible de supprimer une langue&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_nypEkBuTEeiM_Z9_g55MXg" name="list" specification="_nymoUBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    Connection conn;&#xD;
    try {&#xD;
        conn = DaoFactory.getConnection();&#xD;
    } catch (SQLException e1) {&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    }&#xD;
    List&lt;Language> languages = new ArrayList&lt;Language>();&#xD;
    Statement statement = null;&#xD;
    ResultSet resultat = null;&#xD;
    try {&#xD;
        statement = conn.createStatement();&#xD;
        resultat = statement.executeQuery(&quot;SELECT * FROM languages;&quot;);&#xD;
        while (resultat.next()) {&#xD;
            String abreviation = resultat.getString(&quot;abreviation&quot;);&#xD;
            String name = resultat.getString(&quot;name&quot;);&#xD;
            Language language = new Language();&#xD;
            language.setAbreviation(abreviation);&#xD;
            language.setName(name);&#xD;
            languages.add(language);&#xD;
        }&#xD;
    } catch (SQLException e) {&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    } finally {&#xD;
        try {&#xD;
            if (conn != null) {&#xD;
                conn.close();&#xD;
            }&#xD;
        } catch (SQLException e) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
    }&#xD;
    return languages;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_nyqSsBuTEeiM_Z9_g55MXg" name="update" specification="_nyproBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
// Rien à faire : impossible de modifier une langue&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_nyjlARuTEeiM_Z9_g55MXg" name="add" visibility="public" method="_nykzIBuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nykMEBuTEeiM_Z9_g55MXg" name="beans"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_nylaMBuTEeiM_Z9_g55MXg" name="delete" visibility="public" method="_nymBQRuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nymBQBuTEeiM_Z9_g55MXg" name="id">
            <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_nymoUBuTEeiM_Z9_g55MXg" name="list" visibility="public" method="_nypEkBuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nymoURuTEeiM_Z9_g55MXg" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_nynPYBuTEeiM_Z9_g55MXg"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_nyn2cBuTEeiM_Z9_g55MXg" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_nyproBuTEeiM_Z9_g55MXg" name="update" visibility="public" method="_nyqSsBuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nyproRuTEeiM_Z9_g55MXg" name="bean"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_oexKwBuTEeiM_Z9_g55MXg" name="DaoSubtitles" visibility="public">
        <generalization xmi:type="uml:Generalization" xmi:id="_oeyY4BuTEeiM_Z9_g55MXg" general="_nybpMBuTEeiM_Z9_g55MXg"/>
        <generalization xmi:type="uml:Generalization" xmi:id="_x0EtQBuTEeiM_Z9_g55MXg" general="_d8OZEBuTEeiM_Z9_g55MXg"/>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_oe7i0BuTEeiM_Z9_g55MXg" name="add" specification="_oe4fgBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    Connection connexion = null;&#xD;
    PreparedStatement preparedStatement = null;&#xD;
    try {&#xD;
        connexion = DaoFactory.getConnection();&#xD;
        preparedStatement = connexion.prepareStatement(&quot;INSERT INTO subtitles(title, language, idOriginal, sub) VALUES(?, ?, ?, ?);&quot;);&#xD;
        preparedStatement.setString(1, subtitles.getTitle());&#xD;
        preparedStatement.setString(2, subtitles.getLanguage().getAbreviation());&#xD;
        preparedStatement.setInt(3, subtitles.getIdOriginal());&#xD;
        preparedStatement.setString(4, subtitles.toString());&#xD;
        preparedStatement.executeUpdate();&#xD;
        connexion.commit();&#xD;
    } catch (SQLException e) {&#xD;
        try {&#xD;
            if (connexion != null) {&#xD;
                connexion.rollback();&#xD;
            }&#xD;
        } catch (SQLException e2) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    } finally {&#xD;
        try {&#xD;
            if (connexion != null) {&#xD;
                connexion.close();&#xD;
            }&#xD;
        } catch (SQLException e) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_oe_NMBuTEeiM_Z9_g55MXg" name="delete" specification="_oe8w8BuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    Connection connexion = null;&#xD;
    PreparedStatement preparedStatement = null;&#xD;
    try {&#xD;
        connexion = DaoFactory.getConnection();&#xD;
        preparedStatement = connexion.prepareStatement(&quot;DELETE FROM subtitles WHERE id = ?;&quot;);&#xD;
        preparedStatement.setInt(1, id);&#xD;
        preparedStatement.executeUpdate();&#xD;
        connexion.commit();&#xD;
    } catch (SQLException e) {&#xD;
        try {&#xD;
            if (connexion != null) {&#xD;
                connexion.rollback();&#xD;
            }&#xD;
        } catch (SQLException e2) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    } finally {&#xD;
        try {&#xD;
            if (connexion != null) {&#xD;
                connexion.close();&#xD;
            }&#xD;
        } catch (SQLException e) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ofF64BuTEeiM_Z9_g55MXg" name="list" specification="_ofBpcBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    Connection conn;&#xD;
    try {&#xD;
        conn = DaoFactory.getConnection();&#xD;
    } catch (SQLException e1) {&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    }&#xD;
    List&lt;Subtitles> subtitles = new ArrayList&lt;Subtitles>();&#xD;
    Statement statement = null;&#xD;
    ResultSet resultat = null;&#xD;
    try {&#xD;
        statement = conn.createStatement();&#xD;
        resultat = statement.executeQuery(&quot;SELECT * FROM subtitles;&quot;);&#xD;
        List&lt;Language> languages = DaoFactory.getDaoLanguage().list();&#xD;
        while (resultat.next()) {&#xD;
            Subtitles subtitle = new Subtitles();&#xD;
            subtitle.setId(resultat.getInt(&quot;id&quot;));&#xD;
            subtitle.setTitle(resultat.getString(&quot;title&quot;));&#xD;
            subtitle.setIdOriginal(resultat.getInt(&quot;idOriginal&quot;));&#xD;
            for (Iterator&lt;Language> iterator = languages.iterator(); iterator.hasNext(); ) {&#xD;
                Language language = (Language) iterator.next();&#xD;
                if (language.getAbreviation().equals(resultat.getString(&quot;language&quot;))) {&#xD;
                    subtitle.setLanguage(language);&#xD;
                }&#xD;
            }&#xD;
            String[] tab = resultat.getString(&quot;sub&quot;).split(&quot;\n&quot;);&#xD;
            List&lt;SubtitleLine> subLines = new ArrayList&lt;SubtitleLine>();&#xD;
            for (int i = 0; i &lt; tab.length; i++) {&#xD;
                SubtitleLine subLine = new SubtitleLine();&#xD;
                subLine.setId(Integer.valueOf(tab[i]));&#xD;
                i++;&#xD;
                subLine.settStart((String) tab[i].subSequence(0, 12));&#xD;
                subLine.settStart((String) tab[i].subSequence(17, 29));&#xD;
                i++;&#xD;
                subLine.setLine1(tab[i]);&#xD;
                i++;&#xD;
                if (i &lt; tab.length) {&#xD;
                    if (!tab[i].equals(&quot;&quot;)) {&#xD;
                        subLine.setLine2(tab[i]);&#xD;
                        i++;&#xD;
                    }&#xD;
                }&#xD;
                subLines.add(subLine);&#xD;
            }&#xD;
            subtitle.setsubTitleLines(subLines);&#xD;
            subtitles.add(subtitle);&#xD;
        }&#xD;
    } catch (SQLException e) {&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    } finally {&#xD;
        try {&#xD;
            if (conn != null) {&#xD;
                conn.close();&#xD;
            }&#xD;
        } catch (SQLException e) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
    }&#xD;
    return subtitles;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_ofJlQBuTEeiM_Z9_g55MXg" name="update" specification="_ofHwEBuTEeiM_Z9_g55MXg">
          <language>JAVA</language>
          <body>&#xD;
    Connection connexion = null;&#xD;
    PreparedStatement preparedStatement = null;&#xD;
    try {&#xD;
        connexion = DaoFactory.getConnection();&#xD;
        preparedStatement = connexion.prepareStatement(&quot;UPDATE subtitles SET title = ?, language = ?, idOriginal = ?, sub = ? WHERE id = ? ;&quot;);&#xD;
        preparedStatement.setString(1, subtitles.getTitle());&#xD;
        preparedStatement.setString(2, subtitles.getLanguage().getAbreviation());&#xD;
        preparedStatement.setInt(3, subtitles.getIdOriginal());&#xD;
        preparedStatement.setString(4, subtitles.toString());&#xD;
        preparedStatement.setInt(5, subtitles.getId());&#xD;
        preparedStatement.executeUpdate();&#xD;
        connexion.commit();&#xD;
    } catch (SQLException e) {&#xD;
        try {&#xD;
            if (connexion != null) {&#xD;
                connexion.rollback();&#xD;
            }&#xD;
        } catch (SQLException e2) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
        throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
    } finally {&#xD;
        try {&#xD;
            if (connexion != null) {&#xD;
                connexion.close();&#xD;
            }&#xD;
        } catch (SQLException e) {&#xD;
            throw new DaoException(&quot;Impossible de communiquer avec la base de données&quot;);&#xD;
        }&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_oe4fgBuTEeiM_Z9_g55MXg" name="add" visibility="public" method="_oe7i0BuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_oe5toBuTEeiM_Z9_g55MXg" name="subtitles"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_oe8w8BuTEeiM_Z9_g55MXg" name="delete" visibility="public" method="_oe_NMBuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_oe9YABuTEeiM_Z9_g55MXg" name="id">
            <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_ofBpcBuTEeiM_Z9_g55MXg" name="list" visibility="public" method="_ofF64BuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_ofDeoBuTEeiM_Z9_g55MXg" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_ofEFsBuTEeiM_Z9_g55MXg"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_ofEswBuTEeiM_Z9_g55MXg" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_ofHwEBuTEeiM_Z9_g55MXg" name="update" visibility="public" method="_ofJlQBuTEeiM_Z9_g55MXg" raisedException="_d8Q1UBuTEeiM_Z9_g55MXg">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_ofIXIBuTEeiM_Z9_g55MXg" name="subtitles"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Dependency" xmi:id="_sHdIsBuTEeiM_Z9_g55MXg" name="create" client="_NpgYgBuTEeiM_Z9_g55MXg" supplier="_d8OZEBuTEeiM_Z9_g55MXg"/>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_oOqYoBhmEeiAzanQIzaG2w" name="file">
      <packagedElement xmi:type="uml:Class" xmi:id="_fCRzgBhkEeiAzanQIzaG2w" name="SRTFile">
        <generalization xmi:type="uml:Generalization" xmi:id="_zWxyABhlEeiAzanQIzaG2w" general="_l5S5MBhlEeiAzanQIzaG2w"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_l5S5MBhlEeiAzanQIzaG2w" name="File" isAbstract="true">
        <ownedOperation xmi:type="uml:Operation" xmi:id="_nNQbcBhlEeiAzanQIzaG2w" name="save" isAbstract="true">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nNQbcRhlEeiAzanQIzaG2w" name="file" type="_ymjQYBfgEeixr9hZDQbSEg"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_nrhr0BhlEeiAzanQIzaG2w" name="open" isAbstract="true">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nrhr0RhlEeiAzanQIzaG2w" name="adresse">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_nrhr0hhlEeiAzanQIzaG2w" name="file" type="_ymjQYBfgEeixr9hZDQbSEg" direction="return"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_VNRB8Bh_Eeiw1LOe9PSYiA" name="language" type="_-gOewBh9Eeiw1LOe9PSYiA"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_X5bGMBh_Eeiw1LOe9PSYiA" name="name">
            <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
          </ownedParameter>
        </ownedOperation>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_sDbDsBhmEeiAzanQIzaG2w" name="beans">
      <packagedElement xmi:type="uml:Class" xmi:id="_xLFX8BfgEeixr9hZDQbSEg" name="SubtitleLine">
        <ownedAttribute xmi:type="uml:Property" xmi:id="_a8uC4BfhEeixr9hZDQbSEg" name="id" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_fvIpABfhEeixr9hZDQbSEg" name="tStart" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_hcT8gBfhEeixr9hZDQbSEg" name="tEnd" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_lUP3YBfhEeixr9hZDQbSEg" name="line1" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_n0GlABfhEeixr9hZDQbSEg" name="line2" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_ymjQYBfgEeixr9hZDQbSEg" name="Subtitles">
        <ownedAttribute xmi:type="uml:Property" xmi:id="_6qDz0BfgEeixr9hZDQbSEg" name="id" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_t3H3YBfhEeixr9hZDQbSEg" name="title" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_1vxOoBfhEeixr9hZDQbSEg" name="language" visibility="private" type="_-gOewBh9Eeiw1LOe9PSYiA"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_4ks0YBfhEeixr9hZDQbSEg" name="idOriginal" visibility="private">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_E8JtQBhmEeiAzanQIzaG2w" name="subTitles" visibility="private" type="_xLFX8BfgEeixr9hZDQbSEg">
          <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_JKbrkBhmEeiAzanQIzaG2w" value="1"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_JLOVwBhmEeiAzanQIzaG2w" value="*"/>
        </ownedAttribute>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_-gOewBh9Eeiw1LOe9PSYiA" name="Language">
        <ownedAttribute xmi:type="uml:Property" xmi:id="_pB0nABh-Eeiw1LOe9PSYiA" name="abbreviation">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_-R0Z4Bh-Eeiw1LOe9PSYiA" name="name">
          <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
        </ownedAttribute>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_LcYqoBhnEeiAzanQIzaG2w" name="model">
      <packagedElement xmi:type="uml:Class" xmi:id="_B46DEB1mEeimfPw4PtkLMw" name="Model" visibility="public">
        <ownedAttribute xmi:type="uml:Property" xmi:id="_B49tcB1mEeimfPw4PtkLMw" name="errorMessage" visibility="private" type="_eTc3QBhnEeiAzanQIzaG2w" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_B4_ioB1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>&quot;&quot;</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_B8b4MB1mEeimfPw4PtkLMw" name="subtitlesOriginal" visibility="private" type="_B5FCMB1mEeimfPw4PtkLMw" isUnique="false"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_B8fikB1mEeimfPw4PtkLMw" name="subtitlesDestination" visibility="private" type="_B5FCMB1mEeimfPw4PtkLMw" isUnique="false"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_B8il4B1mEeimfPw4PtkLMw" name="tailleTampon" visibility="public" isUnique="false">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_7wRIABydEduyofBvg4RL2w"/>
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_B8kbEB1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>10240</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_B8m3UB1mEeimfPw4PtkLMw" name="cheminFichier" visibility="public" type="_eTc3QBhnEeiAzanQIzaG2w" isUnique="false"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_B8osgB1mEeimfPw4PtkLMw" name="instance" visibility="private" isStatic="true" type="_B46DEB1mEeimfPw4PtkLMw" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_B8qhsB1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>new Model()</body>
          </defaultValue>
        </ownedAttribute>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B80SsB1mEeimfPw4PtkLMw" name="Model" specification="_B8s98B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B87ncB1mEeimfPw4PtkLMw" name="getInstance" specification="_B82u8B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    if (instance == null)&#xD;
        instance = new Model();&#xD;
    return instance;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9DjQB1mEeimfPw4PtkLMw" name="setAdresseWebInf" specification="_B8_44B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    this.cheminFichier = adresseWebInf + &quot;SRT/&quot;;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9K4AB1mEeimfPw4PtkLMw" name="getLanguagesNames" specification="_B9FYcB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    List&lt;Language> list = null;&#xD;
    try {&#xD;
        list = DaoFactory.getDaoLanguage().list();&#xD;
    } catch (DaoException e) {&#xD;
        setError(e.getMessage());&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
    String[] result = new String[list.size()];&#xD;
    int i = 0;&#xD;
    for (Language language : list) {&#xD;
        result[i] = language.getName();&#xD;
        i++;&#xD;
    }&#xD;
    return result;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9XFQB1mEeimfPw4PtkLMw" name="getLanguages" specification="_B9NUQB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    List&lt;Language> list = null;&#xD;
    try {&#xD;
        list = DaoFactory.getDaoLanguage().list();&#xD;
    } catch (DaoException e) {&#xD;
        setError(e.getMessage());&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
    Language result = null;&#xD;
    for (Language language : list) {&#xD;
        if (language.getName().equalsIgnoreCase(languagesNames)) {&#xD;
            result = language;&#xD;
        }&#xD;
    }&#xD;
    return result;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9dy8B1mEeimfPw4PtkLMw" name="getSubtitlesNames" specification="_B9Y6cB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    List&lt;Subtitles> list = null;&#xD;
    try {&#xD;
        list = DaoFactory.getDaoSubtitles().list();&#xD;
    } catch (DaoException e) {&#xD;
        setError(e.getMessage());&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
    String[] result = new String[list.size()];&#xD;
    int i = 0;&#xD;
    for (Subtitles subtitles : list) {&#xD;
        result[i] = subtitles.getTitle() + &quot;.&quot; + subtitles.getLanguage().getAbreviation();&#xD;
        i++;&#xD;
    }&#xD;
    return result;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9iEYB1mEeimfPw4PtkLMw" name="getSubtitlesOriginalsNames" specification="_B9eaAB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    List&lt;Subtitles> list = null;&#xD;
    try {&#xD;
        list = DaoFactory.getDaoSubtitles().list();&#xD;
    } catch (DaoException e) {&#xD;
        setError(e.getMessage());&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
    List&lt;Subtitles> subtitlesOriginals = new ArrayList&lt;Subtitles>();&#xD;
    for (Subtitles subtitles : list) {&#xD;
        if (subtitles.getIdOriginal() == 0) {&#xD;
            subtitlesOriginals.add(subtitles);&#xD;
        }&#xD;
    }&#xD;
    String[] result = new String[subtitlesOriginals.size()];&#xD;
    int i = 0;&#xD;
    for (Subtitles subtitles : subtitlesOriginals) {&#xD;
        result[i] = subtitles.getTitle() + &quot;.&quot; + subtitles.getLanguage().getAbreviation();&#xD;
        i++;&#xD;
    }&#xD;
    return result;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9oLAB1mEeimfPw4PtkLMw" name="getSubtitles" specification="_B9j5kB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    List&lt;Subtitles> list = null;&#xD;
    try {&#xD;
        list = DaoFactory.getDaoSubtitles().list();&#xD;
    } catch (DaoException e) {&#xD;
        setError(e.getMessage());&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
    Subtitles result = null;&#xD;
    for (Subtitles subtitles : list) {&#xD;
        if (subtitles.getTitle().equalsIgnoreCase(title) &amp;&amp; subtitles.getLanguage().getAbreviation().equalsIgnoreCase(language)) {&#xD;
            result = subtitles;&#xD;
        }&#xD;
    }&#xD;
    return result;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B9vfwB1mEeimfPw4PtkLMw" name="setSubtitlesOriginal" specification="_B9rOUB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    Subtitles sub = this.getSubtitles(title, language);&#xD;
    if (sub != null)&#xD;
        this.subtitlesOriginal = this.getSubtitles(title, language);&#xD;
    else&#xD;
        this.setError(&quot;Erreur lors du chargement des sous titres&quot;);&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B94CoB1mEeimfPw4PtkLMw" name="setSubtitlesDestination" specification="_B9zKIB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    Subtitles subtitles = this.getSubtitles(title, this.getLanguages(language).getAbreviation());&#xD;
    if (subtitles == null) {&#xD;
        this.subtitlesDestination = new Subtitles();&#xD;
        this.subtitlesDestination.setLanguage(this.getLanguages(language));&#xD;
        this.subtitlesDestination.setIdOriginal(this.subtitlesOriginal.getId());&#xD;
        this.subtitlesDestination.setTitle(title);&#xD;
        List&lt;SubtitleLine> subtitleLinesDestination = new ArrayList&lt;SubtitleLine>();&#xD;
        List&lt;SubtitleLine> subtitleLinesOriginal = this.subtitlesOriginal.getsubTitleLines();&#xD;
        for (SubtitleLine subtitleLineOriginal : subtitleLinesOriginal) {&#xD;
            SubtitleLine subLine = new SubtitleLine();&#xD;
            subLine.setId(subtitleLineOriginal.getId());&#xD;
            subLine.settStart(subtitleLineOriginal.gettStart());&#xD;
            subLine.settEnd(subtitleLineOriginal.gettEnd());&#xD;
            subLine.setLine1(&quot;&quot;);&#xD;
            subLine.setLine2(&quot;&quot;);&#xD;
            subtitleLinesDestination.add(subLine);&#xD;
        }&#xD;
        this.subtitlesDestination.setsubTitleLines(subtitleLinesDestination);&#xD;
        try {&#xD;
            DaoFactory.getDaoSubtitles().add(subtitlesDestination);&#xD;
        } catch (DaoException e) {&#xD;
            setError(e.getMessage());&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
        this.subtitlesDestination = this.getSubtitles(title, this.getLanguages(language).getAbreviation());&#xD;
    } else {&#xD;
        this.subtitlesDestination = subtitles;&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B98UEB1mEeimfPw4PtkLMw" name="getSubtitlesOriginal" specification="_B9530B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    return subtitlesOriginal;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-BMkB1mEeimfPw4PtkLMw" name="getsubtitlesDestination" specification="_B9-JQB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    return subtitlesDestination;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-GsIB1mEeimfPw4PtkLMw" name="setSubtitlesDestination" specification="_B-Do0B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    this.subtitlesDestination = subtitlesDest;&#xD;
    try {&#xD;
        DaoFactory.getDaoSubtitles().update(this.subtitlesDestination);&#xD;
    } catch (DaoException e) {&#xD;
        this.setError(&quot;Erreur lors de l'enregistrement des modifications dans la base de données&quot;);&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-On8B1mEeimfPw4PtkLMw" name="createSRT" specification="_B-JvcB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    String adresse = this.cheminFichier;&#xD;
    Subtitles sub = this.getSubtitles(title, language);&#xD;
    SRTFile f = new SRTFile();&#xD;
    try {&#xD;
        f.save(sub, adresse);&#xD;
    } catch (FileException e) {&#xD;
        this.setError(&quot;Erreur lors de l'enregistrement du fichier&quot;);&#xD;
        e.printStackTrace();&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-SSUB1mEeimfPw4PtkLMw" name="setError" specification="_B-QdIB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    System.out.println(message);&#xD;
    this.errorMessage = message;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-V8sB1mEeimfPw4PtkLMw" name="getError" specification="_B-UHgB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    String s = this.errorMessage;&#xD;
    this.errorMessage = &quot;&quot;;&#xD;
    return s;&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-hi4B1mEeimfPw4PtkLMw" name="save" specification="_B-a1MB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    // On vérifie qu'on a bien reçu un fichier&#xD;
    String nomFichier = getNomFichier(part);&#xD;
    // Si on a bien un fichier et qu'il s'agit d'un fichier SRT&#xD;
    if (nomFichier != null &amp;&amp; !nomFichier.isEmpty() &amp;&amp; nomFichier.contains(&quot;.srt&quot;)) {&#xD;
        // Corrige un bug du fonctionnement d'Internet Explorer&#xD;
        nomFichier = nomFichier.substring(nomFichier.lastIndexOf('/') + 1).substring(nomFichier.lastIndexOf('\\') + 1);&#xD;
        ecrireFichier(part, nomFichier, cheminFichier);&#xD;
    } else {&#xD;
        this.setError(&quot;Erreur lors du chargement du fichier.&quot;);&#xD;
    }&#xD;
    SRTFile f = new SRTFile();&#xD;
    Subtitles file = null;&#xD;
    try {&#xD;
        file = f.open(this.cheminFichier + nomFichier, this.getLanguages(languageName), title);&#xD;
    } catch (FileException e) {&#xD;
        e.printStackTrace();&#xD;
        this.setError(&quot;Erreur lors du chargement du fichier.&quot;);&#xD;
    }&#xD;
    try {&#xD;
        DaoFactory.getDaoSubtitles().add(file);&#xD;
    } catch (DaoException e) {&#xD;
        e.printStackTrace();&#xD;
        this.setError(&quot;Erreur lors du chargement du fichier.&quot;);&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-qFwB1mEeimfPw4PtkLMw" name="ecrireFichier" specification="_B-jYEB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    BufferedInputStream entree = null;&#xD;
    BufferedOutputStream sortie = null;&#xD;
    try {&#xD;
        entree = new BufferedInputStream(part.getInputStream(), tailleTampon);&#xD;
        sortie = new BufferedOutputStream(new FileOutputStream(new File(chemin + nomFichier)), tailleTampon);&#xD;
        byte[] tampon = new byte[tailleTampon];&#xD;
        int longueur;&#xD;
        while ((longueur = entree.read(tampon)) > 0) {&#xD;
            sortie.write(tampon, 0, longueur);&#xD;
        }&#xD;
    } catch (Exception e) {&#xD;
        this.setError(&quot;Erreur lors du chargement du fichier.&quot;);&#xD;
        e.printStackTrace();&#xD;
    } finally {&#xD;
        try {&#xD;
            sortie.close();&#xD;
        } catch (IOException ignore) {&#xD;
        }&#xD;
        try {&#xD;
            entree.close();&#xD;
        } catch (IOException ignore) {&#xD;
        }&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_B-wMYB1mEeimfPw4PtkLMw" name="getNomFichier" specification="_B-siAB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    for (String contentDisposition : part.getHeader(&quot;content-disposition&quot;).split(&quot;;&quot;)) {&#xD;
        if (contentDisposition.trim().startsWith(&quot;filename&quot;)) {&#xD;
            return contentDisposition.substring(contentDisposition.indexOf('=') + 1).trim().replace(&quot;\&quot;&quot;, &quot;&quot;);&#xD;
        }&#xD;
    }&#xD;
    return null;&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B8s98B1mEeimfPw4PtkLMw" name="Model" visibility="private" method="_B80SsB1mEeimfPw4PtkLMw"/>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B82u8B1mEeimfPw4PtkLMw" name="getInstance" visibility="public" isStatic="true" method="_B87ncB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B85yQB1mEeimfPw4PtkLMw" type="_B46DEB1mEeimfPw4PtkLMw" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B8_44B1mEeimfPw4PtkLMw" name="setAdresseWebInf" visibility="public" method="_B9DjQB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9BuEB1mEeimfPw4PtkLMw" name="adresseWebInf" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9FYcB1mEeimfPw4PtkLMw" name="getLanguagesNames" visibility="public" method="_B9K4AB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9HNoB1mEeimfPw4PtkLMw" type="_eTc3QBhnEeiAzanQIzaG2w" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_B9IbwB1mEeimfPw4PtkLMw"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_B9Jp4B1mEeimfPw4PtkLMw" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9NUQB1mEeimfPw4PtkLMw" name="getLanguages" visibility="public" method="_B9XFQB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9UB8B1mEeimfPw4PtkLMw" type="_B9OiYB1mEeimfPw4PtkLMw" direction="return"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9VQEB1mEeimfPw4PtkLMw" name="languagesNames" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9Y6cB1mEeimfPw4PtkLMw" name="getSubtitlesNames" visibility="public" method="_B9dy8B1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9aIkB1mEeimfPw4PtkLMw" type="_eTc3QBhnEeiAzanQIzaG2w" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_B9b9wB1mEeimfPw4PtkLMw"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_B9ck0B1mEeimfPw4PtkLMw" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9eaAB1mEeimfPw4PtkLMw" name="getSubtitlesOriginalsNames" visibility="public" method="_B9iEYB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9foIB1mEeimfPw4PtkLMw" type="_eTc3QBhnEeiAzanQIzaG2w" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_B9g2QB1mEeimfPw4PtkLMw"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_B9g2QR1mEeimfPw4PtkLMw" value="*"/>
          </ownedParameter>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9j5kB1mEeimfPw4PtkLMw" name="getSubtitles" visibility="private" method="_B9oLAB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9lHsB1mEeimfPw4PtkLMw" type="_B5FCMB1mEeimfPw4PtkLMw" direction="return"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9mV0B1mEeimfPw4PtkLMw" name="title" type="_eTc3QBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9m84B1mEeimfPw4PtkLMw" name="language" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9rOUB1mEeimfPw4PtkLMw" name="setSubtitlesOriginal" visibility="public" method="_B9vfwB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9tDgB1mEeimfPw4PtkLMw" name="title" type="_eTc3QBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9uRoB1mEeimfPw4PtkLMw" name="language" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9zKIB1mEeimfPw4PtkLMw" name="setSubtitlesDestination" visibility="public" method="_B94CoB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B90_UB1mEeimfPw4PtkLMw" name="title" type="_eTc3QBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B92NcB1mEeimfPw4PtkLMw" name="language" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9530B1mEeimfPw4PtkLMw" name="getSubtitlesOriginal" visibility="public" method="_B98UEB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B97F8B1mEeimfPw4PtkLMw" type="_B5FCMB1mEeimfPw4PtkLMw" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B9-JQB1mEeimfPw4PtkLMw" name="getsubtitlesDestination" visibility="public" method="_B-BMkB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B9_-cB1mEeimfPw4PtkLMw" type="_B5FCMB1mEeimfPw4PtkLMw" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-Do0B1mEeimfPw4PtkLMw" name="setSubtitlesDestination" visibility="public" method="_B-GsIB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-E28B1mEeimfPw4PtkLMw" name="subtitlesDest" type="_B5FCMB1mEeimfPw4PtkLMw"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-JvcB1mEeimfPw4PtkLMw" name="createSRT" visibility="public" method="_B-On8B1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-LkoB1mEeimfPw4PtkLMw" name="title" type="_eTc3QBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-MywB1mEeimfPw4PtkLMw" name="language" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-QdIB1mEeimfPw4PtkLMw" name="setError" visibility="public" method="_B-SSUB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-RrQB1mEeimfPw4PtkLMw" name="message" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-UHgB1mEeimfPw4PtkLMw" name="getError" visibility="public" method="_B-V8sB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-UukB1mEeimfPw4PtkLMw" type="_eTc3QBhnEeiAzanQIzaG2w" direction="return"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-a1MB1mEeimfPw4PtkLMw" name="save" visibility="public" method="_B-hi4B1mEeimfPw4PtkLMw" raisedException="_eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-cDUB1mEeimfPw4PtkLMw" name="part" type="_B-XK0B1mEeimfPw4PtkLMw"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-efkB1mEeimfPw4PtkLMw" name="title" type="_eTc3QBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-ftsB1mEeimfPw4PtkLMw" name="languageName" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-jYEB1mEeimfPw4PtkLMw" name="ecrireFichier" visibility="private" method="_B-qFwB1mEeimfPw4PtkLMw" raisedException="_eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-lNQB1mEeimfPw4PtkLMw" name="part" type="_B-XK0B1mEeimfPw4PtkLMw"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-mbYB1mEeimfPw4PtkLMw" name="nomFichier" type="_eTc3QBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-o3oB1mEeimfPw4PtkLMw" name="chemin" type="_eTc3QBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_B-siAB1mEeimfPw4PtkLMw" name="getNomFichier" visibility="private" isStatic="true" method="_B-wMYB1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-twIB1mEeimfPw4PtkLMw" type="_eTc3QBhnEeiAzanQIzaG2w" direction="return"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_B-u-QB1mEeimfPw4PtkLMw" name="part" type="_B-XK0B1mEeimfPw4PtkLMw"/>
        </ownedOperation>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_RJYpsBhnEeiAzanQIzaG2w" name="servlets">
      <packagedElement xmi:type="uml:Class" xmi:id="_RZwh0B1mEeimfPw4PtkLMw" name="DownloadSRT" visibility="public">
        <generalization xmi:type="uml:Generalization" xmi:id="_RZxv8B1mEeimfPw4PtkLMw" general="_eS-9MBhnEeiAzanQIzaG2w"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_RZy-EB1mEeimfPw4PtkLMw" name="serialVersionUID" visibility="private" isLeaf="true" isStatic="true" isUnique="false">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_8heigBydEduyofBvg4RL2w"/>
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_RZ0MMB1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>1L</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_RZ9WIB1mEeimfPw4PtkLMw" name="model" visibility="private" type="_RZ2ocB1mEeimfPw4PtkLMw" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_RZ-kQB1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>Model.getInstance()</body>
          </defaultValue>
        </ownedAttribute>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RaED0B1mEeimfPw4PtkLMw" name="DownloadSRT" specification="_RZ_LUB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    super();&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RaLYkB1mEeimfPw4PtkLMw" name="doGet" specification="_RaGgEB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    request.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    response.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RaUigB1mEeimfPw4PtkLMw" name="doPost" specification="_RaPC8B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    request.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    response.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    String fileName = request.getParameter(&quot;subtitlesNames&quot;);&#xD;
    String name = fileName.substring(0, fileName.length() - 3);&#xD;
    String language = fileName.substring(fileName.length() - 2, fileName.length());&#xD;
    ServletContext context = getServletContext();&#xD;
    String adresse = context.getRealPath(&quot;/WEB-INF/&quot;);&#xD;
    model.setAdresseWebInf(adresse);&#xD;
    model.createSRT(name, language);&#xD;
    adresse += &quot;SRT/&quot;;&#xD;
    fileName += &quot;.srt&quot;;&#xD;
    request.setAttribute(&quot;adresse&quot;, adresse);&#xD;
    request.setAttribute(&quot;fileName&quot;, fileName);&#xD;
    response.setContentType(&quot;application/download&quot;);&#xD;
    response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename=\&quot;&quot; + fileName + &quot;\&quot;&quot;);&#xD;
    ServletOutputStream out = response.getOutputStream();&#xD;
    File file = null;&#xD;
    BufferedInputStream from = null;&#xD;
    try {&#xD;
        file = new File(adresse + &quot;/&quot; + fileName);&#xD;
        response.setContentLength((int) file.length());&#xD;
        int bufferSize = 64 * 1024;&#xD;
        from = new BufferedInputStream(new FileInputStream(file), bufferSize * 2);&#xD;
        byte[] bufferFile = new byte[bufferSize];&#xD;
        for (@SuppressWarnings(&quot;unused&quot;) int i = 0; ; i++) {&#xD;
            int len = from.read(bufferFile);&#xD;
            if (len &lt; 0) {&#xD;
                break;&#xD;
            }&#xD;
            out.write(bufferFile, 0, len);&#xD;
        }&#xD;
        out.flush();&#xD;
    } catch (FileNotFoundException e) {&#xD;
        model.setError(&quot;Erreur du téléchargement du fichier&quot;);&#xD;
        e.printStackTrace();&#xD;
    } catch (IOException e) {&#xD;
        model.setError(&quot;Erreur du téléchargement du fichier&quot;);&#xD;
        e.printStackTrace();&#xD;
    } finally {&#xD;
        if (from != null) {&#xD;
            try {&#xD;
                from.close();&#xD;
            } catch (Exception e) {&#xD;
                e.printStackTrace();&#xD;
            }&#xD;
        }&#xD;
        if (out != null) {&#xD;
            try {&#xD;
                out.close();&#xD;
            } catch (Exception e) {&#xD;
                e.printStackTrace();&#xD;
            }&#xD;
        }&#xD;
        if (file != null) {&#xD;
            try {&#xD;
                file.delete();&#xD;
            } catch (Exception e) {&#xD;
                e.printStackTrace();&#xD;
            }&#xD;
        }&#xD;
    }&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_RZ_LUB1mEeimfPw4PtkLMw" name="DownloadSRT" visibility="public" method="_RaED0B1mEeimfPw4PtkLMw"/>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_RaGgEB1mEeimfPw4PtkLMw" name="doGet" visibility="protected" method="_RaLYkB1mEeimfPw4PtkLMw" raisedException="_eTxnYBhnEeiAzanQIzaG2w _eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_RaHuMB1mEeimfPw4PtkLMw" name="request" type="_eTmoQBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_RaI8UB1mEeimfPw4PtkLMw" name="response" type="_eTq5sBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_RaPC8B1mEeimfPw4PtkLMw" name="doPost" visibility="protected" method="_RaUigB1mEeimfPw4PtkLMw" raisedException="_eTxnYBhnEeiAzanQIzaG2w _eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_RaQ4IB1mEeimfPw4PtkLMw" name="request" type="_eTmoQBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_RaSGQB1mEeimfPw4PtkLMw" name="response" type="_eTq5sBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_dS-LgB1mEeimfPw4PtkLMw" name="Index" visibility="public">
        <generalization xmi:type="uml:Generalization" xmi:id="_dS-ykB1mEeimfPw4PtkLMw" general="_eS-9MBhnEeiAzanQIzaG2w"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_dS_ZoB1mEeimfPw4PtkLMw" name="serialVersionUID" visibility="private" isLeaf="true" isStatic="true" isUnique="false">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_8heigBydEduyofBvg4RL2w"/>
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_dS_ZoR1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>1L</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_dTAAsB1mEeimfPw4PtkLMw" name="model" visibility="private" type="_RZ2ocB1mEeimfPw4PtkLMw" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_dTAAsR1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>Model.getInstance()</body>
          </defaultValue>
        </ownedAttribute>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_dTESIB1mEeimfPw4PtkLMw" name="Index" specification="_dTAnwB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    super();&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_dTLm4B1mEeimfPw4PtkLMw" name="doGet" specification="_dTGuYB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    request.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    response.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    String adresse = getServletContext().getRealPath(&quot;/WEB-INF/&quot;);&#xD;
    model.setAdresseWebInf(adresse);&#xD;
    String[] languagesNames = model.getLanguagesNames();&#xD;
    request.setAttribute(&quot;languagesNames&quot;, languagesNames);&#xD;
    String[] subtitlesOriginalsNames = model.getSubtitlesOriginalsNames();&#xD;
    request.setAttribute(&quot;subtitlesOriginalsNames&quot;, subtitlesOriginalsNames);&#xD;
    String[] subtitlesNames = model.getSubtitlesNames();&#xD;
    request.setAttribute(&quot;subtitlesNames&quot;, subtitlesNames);&#xD;
    String error = model.getError();&#xD;
    request.setAttribute(&quot;error&quot;, error);&#xD;
    this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/index.jsp&quot;).forward(request, response);&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_dTRGcB1mEeimfPw4PtkLMw" name="doPost" specification="_dTODIB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    request.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    response.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    String title = request.getParameter(&quot;title&quot;);&#xD;
    String languageName = request.getParameter(&quot;languageName&quot;);&#xD;
    Part part = request.getPart(&quot;fichier&quot;);&#xD;
    model.save(part, title, languageName);&#xD;
    String error = model.getError();&#xD;
    request.setAttribute(&quot;error&quot;, error);&#xD;
    this.doGet(request, response);&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_dTAnwB1mEeimfPw4PtkLMw" name="Index" visibility="public" method="_dTESIB1mEeimfPw4PtkLMw"/>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_dTGuYB1mEeimfPw4PtkLMw" name="doGet" visibility="protected" method="_dTLm4B1mEeimfPw4PtkLMw" raisedException="_eTxnYBhnEeiAzanQIzaG2w _eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_dTH8gB1mEeimfPw4PtkLMw" name="request" type="_eTmoQBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_dTJKoB1mEeimfPw4PtkLMw" name="response" type="_eTq5sBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_dTODIB1mEeimfPw4PtkLMw" name="doPost" visibility="protected" method="_dTRGcB1mEeimfPw4PtkLMw" raisedException="_eTxnYBhnEeiAzanQIzaG2w _eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_dTOqMB1mEeimfPw4PtkLMw" name="request" type="_eTmoQBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_dTPRQB1mEeimfPw4PtkLMw" name="response" type="_eTq5sBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
      </packagedElement>
      <packagedElement xmi:type="uml:Class" xmi:id="_g3CIIB1mEeimfPw4PtkLMw" name="EditSubtitle" visibility="public">
        <generalization xmi:type="uml:Generalization" xmi:id="_g3D9UB1mEeimfPw4PtkLMw" general="_eS-9MBhnEeiAzanQIzaG2w"/>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_g3D9UR1mEeimfPw4PtkLMw" name="serialVersionUID" visibility="private" isLeaf="true" isStatic="true" isUnique="false">
          <type xmi:type="uml:PrimitiveType" href="pathmap://PapyrusJava_LIBRARIES/JavaLibrary.uml#_8heigBydEduyofBvg4RL2w"/>
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g3D9Uh1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>1L</body>
          </defaultValue>
        </ownedAttribute>
        <ownedAttribute xmi:type="uml:Property" xmi:id="_g3EkYB1mEeimfPw4PtkLMw" name="model" visibility="private" type="_RZ2ocB1mEeimfPw4PtkLMw" isUnique="false">
          <defaultValue xmi:type="uml:OpaqueExpression" xmi:id="_g3EkYR1mEeimfPw4PtkLMw" name="defaultValue">
            <language>JAVA</language>
            <body>Model.getInstance()</body>
          </defaultValue>
        </ownedAttribute>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g3I10B1mEeimfPw4PtkLMw" name="EditSubtitle" specification="_g3FLcB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    super();&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g3NHQB1mEeimfPw4PtkLMw" name="doGet" specification="_g3Jc4B1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    request.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    response.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    String subtitlesNames = request.getParameter(&quot;subtitlesOriginalsNames&quot;);&#xD;
    String name = subtitlesNames.substring(0, subtitlesNames.length() - 3);&#xD;
    String language = subtitlesNames.substring(subtitlesNames.length() - 2, subtitlesNames.length());&#xD;
    model.setSubtitlesOriginal(name, language);&#xD;
    String languageNamesDest = request.getParameter(&quot;languagesNameDest&quot;);&#xD;
    model.setSubtitlesDestination(name, languageNamesDest);&#xD;
    Subtitles subtitlesOr = model.getSubtitlesOriginal();&#xD;
    List&lt;SubtitleLine> subTitleLinesOr = subtitlesOr.getsubTitleLines();&#xD;
    String[][] original = new String[subTitleLinesOr.size()][4];&#xD;
    int i = 0;&#xD;
    for (SubtitleLine subtitleLine : subTitleLinesOr) {&#xD;
        original[i] = affiche(subtitleLine);&#xD;
        i++;&#xD;
    }&#xD;
    request.setAttribute(&quot;original&quot;, original);&#xD;
    Subtitles subtitlesDest = model.getsubtitlesDestination();&#xD;
    List&lt;SubtitleLine> subTitleLinesDest = subtitlesDest.getsubTitleLines();&#xD;
    String[][] destination = new String[subTitleLinesDest.size()][4];&#xD;
    i = 0;&#xD;
    for (SubtitleLine subtitleLine : subTitleLinesDest) {&#xD;
        destination[i] = affiche(subtitleLine);&#xD;
        i++;&#xD;
    }&#xD;
    request.setAttribute(&quot;destination&quot;, destination);&#xD;
    String error = model.getError();&#xD;
    request.setAttribute(&quot;error&quot;, error);&#xD;
    this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/editSubtitle.jsp&quot;).forward(request, response);&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g3PjgB1mEeimfPw4PtkLMw" name="doPost" specification="_g3NuUB1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    request.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    response.setCharacterEncoding(&quot;UTF-8&quot;);&#xD;
    Subtitles subtitlesDest = model.getsubtitlesDestination();&#xD;
    List&lt;SubtitleLine> subTitleLines = subtitlesDest.getsubTitleLines();&#xD;
    for (SubtitleLine subtitleLine : subTitleLines) {&#xD;
        int j = (subtitleLine.getId() - 1);&#xD;
        subtitleLine.setLine1(request.getParameter(&quot;line1-&quot; + j));&#xD;
        subtitleLine.setLine2(request.getParameter(&quot;line2-&quot; + j));&#xD;
    }&#xD;
    subtitlesDest.setsubTitleLines(subTitleLines);&#xD;
    model.setSubtitlesDestination(subtitlesDest);&#xD;
    Subtitles subtitlesOr = model.getSubtitlesOriginal();&#xD;
    List&lt;SubtitleLine> subTitleLinesOr = subtitlesOr.getsubTitleLines();&#xD;
    String[][] original = new String[subTitleLinesOr.size()][4];&#xD;
    int i = 0;&#xD;
    for (SubtitleLine subtitleLine : subTitleLinesOr) {&#xD;
        original[i] = affiche(subtitleLine);&#xD;
        i++;&#xD;
    }&#xD;
    request.setAttribute(&quot;original&quot;, original);&#xD;
    subtitlesDest = model.getsubtitlesDestination();&#xD;
    List&lt;SubtitleLine> subTitleLinesDest = subtitlesDest.getsubTitleLines();&#xD;
    String[][] destination = new String[subTitleLinesDest.size()][4];&#xD;
    i = 0;&#xD;
    for (SubtitleLine subtitleLine : subTitleLinesDest) {&#xD;
        destination[i] = affiche(subtitleLine);&#xD;
        i++;&#xD;
    }&#xD;
    request.setAttribute(&quot;destination&quot;, destination);&#xD;
    String error = model.getError();&#xD;
    request.setAttribute(&quot;error&quot;, error);&#xD;
    this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/editSubtitle.jsp&quot;).forward(request, response);&#xD;
</body>
        </ownedBehavior>
        <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_g3T08R1mEeimfPw4PtkLMw" name="affiche" specification="_g3Sm0R1mEeimfPw4PtkLMw">
          <language>JAVA</language>
          <body>&#xD;
    String[] tab = new String[4];&#xD;
    tab[0] = &quot;&quot; + subLine.getId();&#xD;
    tab[1] = subLine.gettStart() + &quot; --> &quot; + subLine.gettEnd();&#xD;
    tab[2] = subLine.getLine1();&#xD;
    tab[3] = subLine.getLine2();&#xD;
    return tab;&#xD;
</body>
        </ownedBehavior>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_g3FLcB1mEeimfPw4PtkLMw" name="EditSubtitle" visibility="public" method="_g3I10B1mEeimfPw4PtkLMw"/>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_g3Jc4B1mEeimfPw4PtkLMw" name="doGet" visibility="protected" method="_g3NHQB1mEeimfPw4PtkLMw" raisedException="_eTxnYBhnEeiAzanQIzaG2w _eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_g3KD8B1mEeimfPw4PtkLMw" name="request" type="_eTmoQBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_g3KrAB1mEeimfPw4PtkLMw" name="response" type="_eTq5sBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_g3NuUB1mEeimfPw4PtkLMw" name="doPost" visibility="protected" method="_g3PjgB1mEeimfPw4PtkLMw" raisedException="_eTxnYBhnEeiAzanQIzaG2w _eT2f4BhnEeiAzanQIzaG2w">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_g3OVYB1mEeimfPw4PtkLMw" name="request" type="_eTmoQBhnEeiAzanQIzaG2w"/>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_g3O8cB1mEeimfPw4PtkLMw" name="response" type="_eTq5sBhnEeiAzanQIzaG2w"/>
        </ownedOperation>
        <ownedOperation xmi:type="uml:Operation" xmi:id="_g3Sm0R1mEeimfPw4PtkLMw" name="affiche" visibility="private" method="_g3T08R1mEeimfPw4PtkLMw">
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_g3TN4B1mEeimfPw4PtkLMw" type="_eTc3QBhnEeiAzanQIzaG2w" direction="return">
            <lowerValue xmi:type="uml:LiteralInteger" xmi:id="_g3TN4R1mEeimfPw4PtkLMw"/>
            <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_g3TN4h1mEeimfPw4PtkLMw" value="*"/>
          </ownedParameter>
          <ownedParameter xmi:type="uml:Parameter" xmi:id="_g3T08B1mEeimfPw4PtkLMw" name="subLine" type="_g3QKkB1mEeimfPw4PtkLMw"/>
        </ownedOperation>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_eS8g8BhnEeiAzanQIzaG2w" name="importedTypes">
      <packagedElement xmi:type="uml:Package" xmi:id="_eS9IABhnEeiAzanQIzaG2w" name="javax">
        <packagedElement xmi:type="uml:Package" xmi:id="_eS9vEBhnEeiAzanQIzaG2w" name="servlet">
          <packagedElement xmi:type="uml:Package" xmi:id="_eS-WIBhnEeiAzanQIzaG2w" name="http">
            <packagedElement xmi:type="uml:Class" xmi:id="_eS-9MBhnEeiAzanQIzaG2w" name="HttpServlet"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_eTmoQBhnEeiAzanQIzaG2w" name="HttpServletRequest"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_eTq5sBhnEeiAzanQIzaG2w" name="HttpServletResponse"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_B-XK0B1mEeimfPw4PtkLMw" name="Part"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Class" xmi:id="_eTxnYBhnEeiAzanQIzaG2w" name="ServletException"/>
        </packagedElement>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_B5D0EB1mEeimfPw4PtkLMw" name="com">
        <packagedElement xmi:type="uml:Package" xmi:id="_B5EbIB1mEeimfPw4PtkLMw" name="beans">
          <packagedElement xmi:type="uml:Class" xmi:id="_B5FCMB1mEeimfPw4PtkLMw" name="Subtitles"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_B9OiYB1mEeimfPw4PtkLMw" name="Language"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_g3QKkB1mEeimfPw4PtkLMw" name="SubtitleLine"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_RZ2BYB1mEeimfPw4PtkLMw" name="model">
          <packagedElement xmi:type="uml:Class" xmi:id="_RZ2ocB1mEeimfPw4PtkLMw" name="Model"/>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_eTabABhnEeiAzanQIzaG2w" name="java">
      <packagedElement xmi:type="uml:Package" xmi:id="_eTbCEBhnEeiAzanQIzaG2w" name="java">
        <packagedElement xmi:type="uml:Package" xmi:id="_eTbpIBhnEeiAzanQIzaG2w" name="lang">
          <packagedElement xmi:type="uml:Class" xmi:id="_eTc3QBhnEeiAzanQIzaG2w" name="String"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_eT140BhnEeiAzanQIzaG2w" name="io">
          <packagedElement xmi:type="uml:Interface" xmi:id="_eT2f4BhnEeiAzanQIzaG2w" name="IOException"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_zX7hMBrZEeivNpsMtsMdlg" name="sql">
          <packagedElement xmi:type="uml:Class" xmi:id="_zX8vUBrZEeivNpsMtsMdlg" name="Connection"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_NvBxsBuTEeiM_Z9_g55MXg" name="SQLException"/>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_zXBiQBrZEeivNpsMtsMdlg" name="SubTranslate">
      <packagedElement xmi:type="uml:Package" xmi:id="_zX0zgBrZEeivNpsMtsMdlg" name="com">
        <packagedElement xmi:type="uml:Package" xmi:id="_zX2osBrZEeivNpsMtsMdlg" name="dao">
          <packagedElement xmi:type="uml:Class" xmi:id="_zYm2oBrZEeivNpsMtsMdlg" name="T"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_d8Q1UBuTEeiM_Z9_g55MXg" name="DaoException"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_nybpMBuTEeiM_Z9_g55MXg" name="Dao"/>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_eSGzcBhnEeiAzanQIzaG2w">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_eSLE4BhnEeiAzanQIzaG2w" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.eclipse.org/papyrus/PapyrusJava/1#/"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="pathmap://PapyrusJava_PROFILES/PapyrusJava.profile.uml#_j9REUByGEduN1bTiWJ0lyw"/>
    </profileApplication>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_eSOvQBhnEeiAzanQIzaG2w">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_eSP9YBhnEeiAzanQIzaG2w" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.eclipse.org/papyrus/Codegen/1#/"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="pathmap://Codegen_PROFILES/Codegen.profile.uml#_fPDsIBa-EearhdjjJ6cVzQ"/>
    </profileApplication>
    <profileApplication xmi:type="uml:ProfileApplication" xmi:id="_eSRLgBhnEeiAzanQIzaG2w">
      <eAnnotations xmi:type="ecore:EAnnotation" xmi:id="_eSRykBhnEeiAzanQIzaG2w" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.eclipse.org/uml2/5.0.0/UML/Profile/Standard#/"/>
      </eAnnotations>
      <appliedProfile xmi:type="uml:Profile" href="pathmap://UML_PROFILES/Standard.profile.uml#_0"/>
    </profileApplication>
  </uml:Model>
  <PapyrusJava:External xmi:id="_eTKjYBhnEeiAzanQIzaG2w" name="javax.servlet.http.HttpServlet" base_Classifier="_eS-9MBhnEeiAzanQIzaG2w"/>
  <PapyrusJava:External xmi:id="_eTghoBhnEeiAzanQIzaG2w" name="java.lang.String" base_Classifier="_eTc3QBhnEeiAzanQIzaG2w"/>
  <PapyrusJava:External xmi:id="_eTprkBhnEeiAzanQIzaG2w" name="javax.servlet.http.HttpServletRequest" base_Classifier="_eTmoQBhnEeiAzanQIzaG2w"/>
  <PapyrusJava:External xmi:id="_eTtV8BhnEeiAzanQIzaG2w" name="javax.servlet.http.HttpServletResponse" base_Classifier="_eTq5sBhnEeiAzanQIzaG2w"/>
  <PapyrusJava:External xmi:id="_eT0DoBhnEeiAzanQIzaG2w" name="javax.servlet.ServletException" base_Classifier="_eTxnYBhnEeiAzanQIzaG2w"/>
  <PapyrusJava:External xmi:id="_eT48IBhnEeiAzanQIzaG2w" name="java.io.IOException" base_Classifier="_eT2f4BhnEeiAzanQIzaG2w"/>
  <PapyrusJava:External xmi:id="_zYKKsBrZEeivNpsMtsMdlg" name="java.sql.Connection" base_Classifier="_zX8vUBrZEeivNpsMtsMdlg"/>
  <PapyrusJava:External xmi:id="_zYqhABrZEeivNpsMtsMdlg" name="T" base_Classifier="_zYm2oBrZEeivNpsMtsMdlg"/>
  <standard:Create xmi:id="_Nuwr8BuTEeiM_Z9_g55MXg" base_BehavioralFeature="_NqLt8BuTEeiM_Z9_g55MXg"/>
  <PapyrusJava:External xmi:id="_NvFcEBuTEeiM_Z9_g55MXg" name="java.sql.SQLException" base_Classifier="_NvBxsBuTEeiM_Z9_g55MXg"/>
  <PapyrusJava:External xmi:id="_d8TRkBuTEeiM_Z9_g55MXg" name="DaoException" base_Classifier="_d8Q1UBuTEeiM_Z9_g55MXg"/>
  <PapyrusJava:External xmi:id="_nyfTkBuTEeiM_Z9_g55MXg" name="Dao" base_Classifier="_nybpMBuTEeiM_Z9_g55MXg"/>
  <PapyrusJava:External xmi:id="_B8YN0B1mEeimfPw4PtkLMw" name="com.beans.Subtitles" base_Classifier="_B5FCMB1mEeimfPw4PtkLMw"/>
  <standard:Create xmi:id="_B8x2cB1mEeimfPw4PtkLMw" base_BehavioralFeature="_B8s98B1mEeimfPw4PtkLMw"/>
  <PapyrusJava:External xmi:id="_B9Sz0B1mEeimfPw4PtkLMw" name="com.beans.Language" base_Classifier="_B9OiYB1mEeimfPw4PtkLMw"/>
  <PapyrusJava:External xmi:id="_B-ZnEB1mEeimfPw4PtkLMw" name="javax.servlet.http.Part" base_Classifier="_B-XK0B1mEeimfPw4PtkLMw"/>
  <PapyrusJava:External xmi:id="_RZ8IAB1mEeimfPw4PtkLMw" name="com.model.Model" base_Classifier="_RZ2ocB1mEeimfPw4PtkLMw"/>
  <standard:Create xmi:id="_RaBnkB1mEeimfPw4PtkLMw" base_BehavioralFeature="_RZ_LUB1mEeimfPw4PtkLMw"/>
  <standard:Create xmi:id="_dTCc8B1mEeimfPw4PtkLMw" base_BehavioralFeature="_dTAnwB1mEeimfPw4PtkLMw"/>
  <standard:Create xmi:id="_g3HnsB1mEeimfPw4PtkLMw" base_BehavioralFeature="_g3FLcB1mEeimfPw4PtkLMw"/>
  <PapyrusJava:External xmi:id="_g3Sm0B1mEeimfPw4PtkLMw" name="com.beans.SubtitleLine" base_Classifier="_g3QKkB1mEeimfPw4PtkLMw"/>
</xmi:XMI>
